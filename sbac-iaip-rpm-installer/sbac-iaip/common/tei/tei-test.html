<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>TEI Test</title>
    <link rel="stylesheet" href="demo.css" media="screen">

    <script src="/common/js/jquery-1.4.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="/common/js/raphael-min.js" type="text/javascript" charset="utf-8"></script>
    <script src="js/tei-common.js" type="text/javascript" charset="utf-8"></script>
    <script src="js/tei-lines.js" type="text/javascript" charset="utf-8"></script>
    <script src="js/tei-dnd.js" type="text/javascript" charset="utf-8"></script>
    <script src="js/tei-text.js" type="text/javascript" charset="utf-8"></script>
    <script src="js/tei-test.js" type="text/javascript" charset="utf-8"></script>
    <script type="text/javascript">
    
        window.onload = function () {
            
            var holder = document.getElementById("holder");
            holder.paper = Raphael("holder", holder.clientWidth, holder.clientHeight);

            //alert(JSON.stringify(window.opener.getItemDefinition()));
            init();
            
        };
        
        function init() {
            var table = document.getElementById("pointsTable");
            table.innerHTML = "";
//            alert(JSON.stringify(window.opener.getItemDefinition()));
            var itemDef = window.opener.getItemDefinition();
            tryIt(holder.paper, itemDef);
    //        tryIt(document.getElementById('holder').paper, document.getElementById('jsonTextArea').value);
        }
    
    </script>
    <style type="text/css" media="screen">
        #holder {
            -moz-border-radius: 5px;
            -webkit-border-radius: 5px;
            border: solid 1px #333;
        }
        p {
            text-align: center;
        }
    </style>

</head>
<body>

    <table>
        <tr><td valign="top">
        <div id="holder" style="border:1px solid #ccc; width:640px; height:480px;" ondblclick="mouseDblClick(event);" onmousemove="mouseMove(event);"></div>
        <td style="display: none;" valign="top"><textarea id='jsonTextArea' cols=40 rows=8></textarea><br><input type="button" value="Try It!" onclick="init()">
        <tr><td valign="top">
        <table id="pointsTable">
        </table>
        <table style="display:none; border-spacing: 0px" id="changeTextTable">
            <tr><td><textarea id="changeTextArea" style="font-family: 'Arial'" rows=5 cols="60"></textarea>
            <tr><td valign="top"><input type="button" value="Change Text" onclick="changeText(document.getElementById('changeTextArea').value);">
        </table>
        <tr><td><input type="button" value="Reset" onclick="init();">
    </table>
    <br>
    <div id="shapes"></div>

</body>
</html>