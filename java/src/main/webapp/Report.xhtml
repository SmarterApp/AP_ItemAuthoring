<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:t="http://myfaces.apache.org/tomahawk">

<h:head>
    <h:outputStylesheet name="css/basic.css"/>
    <h:outputScript library="javascript" name="Report.js"/>
    <h:outputScript library="javascript" name="jquery-1.7.2.js"/>
    
    <style type="text/css">
        html { height: 100%; }
        body {
            height: 100%;
            margin:0px;
            padding:0px;
            overflow:hidden;
        }
        
        .topRow {
     		position: absolute;
		    bottom: 24px;
		    left: 0;
		    right: 0;
		    top: 0;
		    width: 100%;

        }
        
        .bottomRow {
            position: absolute;
            height: 24px;
            bottom: 0;
            width: 100%;
            text-align: right;
            border-top: 2px solid lightgray; 
            padding-top: 5px; 
            margin-bottom: 5px
        }
        
        .contentFrame {
            position: absolute;
            width: 100%;
            height: 96%;
        }
        
    </style>
    
</h:head>        

<body>
    <f:view>

		<h:inputHidden id="reportContent" value="#{report.content}" readonly="true"/>
		<t:div rendered="#{empty report.content}"><h3>No data received</h3></t:div>
        <t:div rendered="#{!(empty report.content)}" styleClass="topRow">
		    <iframe frameBorder="0" class="contentFrame" id="contentFrame" src="about:blank"></iframe>
		</t:div>
        <t:div rendered="#{!(empty report.content)}" styleClass="bottomRow">
            <h:form>
                <h:outputText value="Save as: "/>
                <h:selectOneMenu id="saveAsMenu" value="#{report.saveAsFormat}">
                    <f:selectItem itemLabel="PDF" itemValue="PDF"/>
                    <f:selectItem itemLabel="CSV" itemValue="CSV"/>
                    <f:selectItem itemLabel="RTF" itemValue="RTF"/>
                </h:selectOneMenu>
                <h:commandButton value="Save" action="#{report.doSave}"/>
            </h:form>
        </t:div>
    </f:view>
</body>
</html>